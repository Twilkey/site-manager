{"version":3,"file":"static/js/234.8621ef18.chunk.js","mappings":"2OAiFA,UA7Ee,SAACA,GACZ,IAAMC,GAAcC,EAAAA,EAAAA,MACpB,GAAoCC,EAAAA,EAAAA,UAAS,IAAG,eAAzCC,EAAU,KAAEC,EAAa,KAChC,GAAwBF,EAAAA,EAAAA,UAAS,IAAG,eAA7BG,EAAI,KAAEC,EAAO,KACdC,GAAmBC,EAAAA,EAAAA,SAAO,GAgChC,OA9BAC,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAAQC,mBAAmBX,EAAYY,MACvCC,EAAO,yCAAG,mGACNC,MAAM,UAAGC,kCAAiC,KAAM,IAAIC,gBAAgB,CACtEC,YAAaC,OAAOC,SAASC,SAC7BC,OAAQ,aACRC,MAAO,sFACPC,MAAO,aACPC,OAAO,QAAD,OAAUd,MAEnBe,MAAK,SAACC,GACH,OAAOA,EAASC,MACpB,IACCF,MAAK,SAACG,GACHtB,GAAQ,OAAIsB,GAChB,IACA,SAACC,GACGC,QAAQC,IAAIF,GACZG,EAAAA,EAAAA,MAAa,SAAC,IAAO,CAACC,UAAQ,EAACC,KAAK,QAAO,SAAEL,EAAMM,UAAoB,CAAEC,SAAU,KACvF,IAAG,KAAD,sCACL,kBAlBY,oCAoBmB,IAA7B7B,EAAiB8B,UAChBjC,EAAcM,GACdG,IAEAN,EAAiB8B,SAAU,EAEnC,GAAG,CAACrC,EAAYY,KAAMT,KAGlB,iCACI,gBAAKmC,UAAU,aAAY,UACvB,wBAAKnC,MAERE,IACG,iBAAKiC,UAAU,iCAAgC,WAC3C,iBAAKA,UAAU,kBAAiB,WAC5B,gBAAKA,UAAU,qCAAoC,SAAC,UACpD,gBAAKA,UAAU,qCAAoC,SAAC,YACpD,gBAAKA,UAAU,qCAAoC,SAAC,aACpD,gBAAKA,UAAU,qCAAoC,SAAC,sBACpD,gBAAKA,UAAU,qCAAoC,SAAC,cACpD,gBAAKA,UAAU,qCAAoC,SAAC,eAEvDjC,EAAKkC,KAAI,SAAClC,EAAMmC,GACb,IAAIC,EAAaC,KAAKC,MAAMtC,EAAKuC,SAASC,MAAK,SAAAC,GAAC,OAAIA,EAAElC,OAAST,CAAU,IAErE4C,EAAaN,EAAWO,OAI5B,MAH8B,MAA3BP,EAAWQ,aAA6C,QAAtBR,EAAWO,SAC5CD,GAAc,IAAIN,EAAWQ,cAG7B,gBAAKX,UAAU,wBAAuB,UAClC,iBAAKA,UAAU,uBAAsB,WACjC,gBAAKA,UAAU,qCAAoC,UAAC,SAAC,KAAI,CAACY,GAAE,gBAAW7C,EAAK8C,IAAK,SAAE9C,EAAK+C,WACxF,gBAAKd,UAAU,oBAAmB,SAAEG,EAAWY,UAC/C,gBAAKf,UAAU,oBAAmB,SAAEG,EAAWa,WAC/C,gBAAKhB,UAAU,oBAAmB,SAAES,KACpC,gBAAKT,UAAU,oBAAmB,UAAC,cAAGiB,KAAMlD,EAAKmD,IAAKC,OAAO,SAASC,IAAI,aAAY,SAAC,aACvF,gBAAKpB,UAAU,oBAAmB,UAAC,cAAGiB,KAAMlD,EAAKsD,SAAUF,OAAO,SAASC,IAAI,aAAY,SAAC,gBAPxDlB,EAWpD,SAKpB,C","sources":["pages/Plugin.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { Message, toaster } from 'rsuite';\r\n\r\nconst Plugin = (props) => {\r\n    const routeParams = useParams();\r\n    const [pluginname, setPluginName] = useState('');\r\n    const [data, setData] = useState([]);\r\n    const fetchingComplete = useRef(false);\r\n\r\n    useEffect(() => {\r\n        const title = decodeURIComponent(routeParams.name);\r\n        const getData = async () => {\r\n            await fetch(`${process.env.REACT_APP_BACKEND_URL}?` + new URLSearchParams({\r\n                enviornment: window.location.hostname,\r\n                action: 'get_custom',\r\n                table: 'sites, JSON_TABLE(plugins, \"$[*]\" COLUMNS(name VARCHAR(100) PATH \"$.name\")) as name',\r\n                where: 'name=:name',\r\n                params: `name:${title}`\r\n            }))\r\n            .then((response) => {\r\n                return response.json();\r\n            })\r\n            .then((result) => {\r\n                setData([...result]);\r\n            },\r\n            (error) => {\r\n                console.log(error)\r\n                toaster.push(<Message showIcon type=\"error\">{error.message}</Message>, { duration: 3000 });\r\n            });\r\n        }\r\n\r\n        if(fetchingComplete.current === false){\r\n            setPluginName(title);\r\n            getData();\r\n            \r\n            fetchingComplete.current = true;\r\n        }\r\n    }, [routeParams.name, pluginname]);\r\n\r\n    return (\r\n        <>\r\n            <div className='page-title'>\r\n                <h1>{pluginname}</h1>\r\n            </div>\r\n            {data && \r\n                <div className='page-table page-table-sitelist'>\r\n                    <div className='page-table-head'>\r\n                        <div className='page-table-column page-table-label'>Site</div>\r\n                        <div className='page-table-column page-table-label'>Status</div>\r\n                        <div className='page-table-column page-table-label'>Version</div>\r\n                        <div className='page-table-column page-table-label'>Update Available</div>\r\n                        <div className='page-table-column page-table-label'>Frontend</div>\r\n                        <div className='page-table-column page-table-label'>Backend</div>\r\n                    </div>\r\n                    {data.map((data, index) => {\r\n                        let plugindata = JSON.parse(data.plugins).find(p => p.name === pluginname);\r\n\r\n                        let updatetext = plugindata.update;\r\n                        if(plugindata.new_version !== \"-\" && plugindata.update === \"Yes\") {\r\n                            updatetext += \"/\"+plugindata.new_version;\r\n                        }\r\n                        return (\r\n                            <div className='page-table-row-outter' key={index}>\r\n                                <div className='page-table-row-inner'>\r\n                                    <div className='page-table-column page-table-label'><Link to={`/site/${data.id}`}>{data.label}</Link></div>\r\n                                    <div className='page-table-column'>{plugindata.status}</div>\r\n                                    <div className='page-table-column'>{plugindata.version}</div>\r\n                                    <div className='page-table-column'>{updatetext}</div>\r\n                                    <div className='page-table-column'><a href={data.url} target=\"_blank\" rel=\"noreferrer\">Visit</a></div>\r\n                                    <div className='page-table-column'><a href={data.adminurl} target=\"_blank\" rel=\"noreferrer\">Visit</a></div>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Plugin;"],"names":["props","routeParams","useParams","useState","pluginname","setPluginName","data","setData","fetchingComplete","useRef","useEffect","title","decodeURIComponent","name","getData","fetch","process","URLSearchParams","enviornment","window","location","hostname","action","table","where","params","then","response","json","result","error","console","log","toaster","showIcon","type","message","duration","current","className","map","index","plugindata","JSON","parse","plugins","find","p","updatetext","update","new_version","to","id","label","status","version","href","url","target","rel","adminurl"],"sourceRoot":""}