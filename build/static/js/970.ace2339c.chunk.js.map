{"version":3,"file":"static/js/970.ace2339c.chunk.js","mappings":"oNA4EA,UAxEmB,SAACA,GAChB,OAAwBC,EAAAA,EAAAA,UAAS,IAAG,eAA7BC,EAAI,KAAEC,EAAO,KACdC,GAAmBC,EAAAA,EAAAA,SAAO,GA6ChC,OA3CAC,EAAAA,EAAAA,YAAU,WACN,IAAgC,IAA7BF,EAAiBG,QAAkB,CAClC,IAAMC,EAAQ,yCAAG,2FAEK,OADdC,EAAY,GACZC,EAAY,GAAG,EAAD,OAEZC,MAAM,UAAGC,kCAAiC,KAAM,IAAIC,gBAAgB,CACtEC,YAAaC,OAAOC,SAASC,SAC7BC,OAAQ,YACRC,QAAS,SACTC,aAAc,SAEjBC,MAAK,SAACC,GACH,OAAOA,EAASC,MACpB,IACCF,MAAK,SAACG,GACHA,EAAOC,SAAQ,SAAAC,GACU,OAAlBA,EAAMC,SACLC,KAAKC,MAAMH,EAAMC,SAASF,SAAQ,SAAAK,GAC3BA,EAAOC,OACHtB,EAAUuB,eAAeF,EAAOC,MAC/BtB,EAAUqB,EAAOC,MAAM,KAEvBtB,EAAUqB,EAAOC,MAAQ,CAACD,EAAOC,KAAM,GAGnD,GAER,IACArB,EAAmB,QAAID,EACvBN,EAAQO,EACZ,IACA,SAACuB,GACGC,QAAQC,IAAIF,GACZG,EAAAA,EAAAA,MAAa,SAAC,IAAO,CAACC,UAAQ,EAACC,KAAK,QAAO,SAAEL,EAAMM,UAAoB,CAAEC,SAAU,KACvF,IAAG,KAAD,sCACL,kBAlCa,mCAoCdhC,IACAJ,EAAiBG,SAAU,CAC/B,CACJ,KAGI,iCACI,gBAAKkC,UAAU,aAAY,UACvB,wBAAI,kBAEPvC,GAAQA,EAAKyB,UACV,iBAAKc,UAAU,aAAY,WACvB,iBAAKA,UAAU,kBAAiB,WAC5B,gBAAKA,UAAU,qCAAoC,SAAC,iBACpD,gBAAKA,UAAU,qCAAoC,SAAC,aAEvDC,OAAOC,QAAQzC,EAAKyB,SAASiB,KAAI,SAACd,EAAQe,GAAK,OAC5C,gBAAKJ,UAAU,wBAAuB,UAClC,iBAAKA,UAAU,uBAAsB,WACjC,gBAAKA,UAAU,qCAAoC,UAAC,SAAC,KAAI,CAACK,GAAE,uBAAkBC,mBAAmBjB,EAAO,GAAG,KAAM,SAAEA,EAAO,GAAG,QAC7H,gBAAKW,UAAU,oBAAmB,SAAEX,EAAO,GAAG,SAHVe,EAKtC,SAM9B,C","sources":["pages/PluginList.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Message, toaster } from 'rsuite';\r\n\r\nconst PluginList = (props) => {\r\n    const [data, setData] = useState([]);\r\n    const fetchingComplete = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if(fetchingComplete.current === false){\r\n            const getSites = async () => {\r\n                let pluginArr = [];\r\n                let mergedArr = [];\r\n\r\n                await fetch(`${process.env.REACT_APP_BACKEND_URL}?` + new URLSearchParams({\r\n                    enviornment: window.location.hostname,\r\n                    action: 'get_sites',\r\n                    orderby: 'domain',\r\n                    orderbydirec: 'ASC'\r\n                }))\r\n                .then((response) => {\r\n                    return response.json();\r\n                })\r\n                .then((result) => {\r\n                    result.forEach(sites => {\r\n                        if(sites.plugins !== null){\r\n                            JSON.parse(sites.plugins).forEach(plugin => {\r\n                                if(plugin.name){\r\n                                    if(pluginArr.hasOwnProperty(plugin.name)){\r\n                                        pluginArr[plugin.name][1]++;\r\n                                    } else {\r\n                                        pluginArr[plugin.name] = [plugin.name, 1];\r\n                                    }\r\n                                }\r\n                            })\r\n                        }\r\n                    });\r\n                    mergedArr['plugins'] = pluginArr;\r\n                    setData(mergedArr);\r\n                },\r\n                (error) => {\r\n                    console.log(error)\r\n                    toaster.push(<Message showIcon type=\"error\">{error.message}</Message>, { duration: 3000 });\r\n                });\r\n            }\r\n\r\n            getSites();\r\n            fetchingComplete.current = true;\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <div className='page-title'>\r\n                <h1>Plugin List</h1>\r\n            </div>\r\n            {data && data.plugins && \r\n                <div className='page-table'>\r\n                    <div className='page-table-head'>\r\n                        <div className='page-table-column page-table-label'>Plugin Name</div>\r\n                        <div className='page-table-column page-table-label'>Count</div>\r\n                    </div>\r\n                    {Object.entries(data.plugins).map((plugin, index) => (\r\n                        <div className='page-table-row-outter' key={index}>\r\n                            <div className='page-table-row-inner'>\r\n                                <div className='page-table-column page-table-label'><Link to={`/site/plugin/${encodeURIComponent(plugin[1][0])}`}>{plugin[1][0]}</Link></div>\r\n                                <div className='page-table-column'>{plugin[1][1]}</div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PluginList;"],"names":["props","useState","data","setData","fetchingComplete","useRef","useEffect","current","getSites","pluginArr","mergedArr","fetch","process","URLSearchParams","enviornment","window","location","hostname","action","orderby","orderbydirec","then","response","json","result","forEach","sites","plugins","JSON","parse","plugin","name","hasOwnProperty","error","console","log","toaster","showIcon","type","message","duration","className","Object","entries","map","index","to","encodeURIComponent"],"sourceRoot":""}