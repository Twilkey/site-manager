"use strict";(self.webpackChunksite_manager=self.webpackChunksite_manager||[]).push([[255],{64253:function(e,a,s){var l=s(1413),r=s(45987),n=s(72791),c=s(22178),t=s(80184),i=["name","message","label","accepter","error"],o=(0,n.forwardRef)((function(e,a){var s=e.name,n=e.message,o=e.label,d=e.accepter,m=e.error,u=(0,r.Z)(e,i);return(0,t.jsxs)(c.Z.Group,{controlId:"".concat(s),ref:a,className:m?"has-error":"",children:[(0,t.jsxs)(c.Z.ControlLabel,{children:[o," "]}),(0,t.jsx)(c.Z.Control,(0,l.Z)({name:s,accepter:d,errorMessage:m},u)),(0,t.jsx)(c.Z.HelpText,{children:n})]})}));a.Z=o},47255:function(e,a,s){s.r(a);var l=s(74165),r=s(15861),n=s(29439),c=s(72791),t=s(11087),i=s(39716),o=s(13748),d=s(22178),m=s(26032),u=s(67045),h=s(64253),p=s(80184);a.default=function(e){var a=(0,c.useRef)(),s=(0,c.useState)(null),b=(0,n.Z)(s,2),g=b[0],x=b[1],j=(0,c.useState)({}),f=(0,n.Z)(j,2),v=f[0],N=f[1],Z=(0,c.useState)({search:""}),_=(0,n.Z)(Z,2),w=_[0],S=_[1],k=function(){var e=(0,r.Z)((0,l.Z)().mark((function e(a){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("".concat("http://devops-backend.wwtd.tech","?")+new URLSearchParams({enviornment:window.location.hostname,action:"get_custom",fields:"sites.*, domains.domain AS domain_name",table:'sites LEFT JOIN domains on sites.domain = domains.id, JSON_TABLE(sites.users, "$[*]" COLUMNS(user_email VARCHAR(100) PATH "$.user_email")) as user_email',where:"user_email=:user_email",params:"user_email:".concat(w.search)})).then((function(e){return e.json()})).then((function(e){x(e)}),(function(e){console.log(e),i.Z.push((0,p.jsx)(o.Z,{showIcon:!0,type:"error",children:e.message}),{duration:3e3})}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"page-title",children:(0,p.jsx)("h1",{children:"Search Sites Users"})}),(0,p.jsx)(d.Z,{ref:a,onChange:S,onCheck:N,fluid:!0,children:(0,p.jsxs)("div",{className:"page-box",children:[(0,p.jsx)("div",{className:"page-box-form-input",children:(0,p.jsx)(h.Z,{name:"search",label:"Search",accepter:m.Z,error:v.search})}),(0,p.jsx)(d.Z.Group,{children:(0,p.jsx)(u.Z,{appearance:"primary",onClick:k,children:"Submit"})})]})}),g&&(0,p.jsxs)("div",{className:"page-table",children:[(0,p.jsxs)("div",{className:"page-table-head",children:[(0,p.jsx)("div",{className:"page-table-column page-table-label",children:"Site"}),(0,p.jsx)("div",{className:"page-table-column page-table-label",children:"Domain"}),(0,p.jsx)("div",{className:"page-table-column page-table-label",children:"Name"}),(0,p.jsx)("div",{className:"page-table-column page-table-label",children:"Username"}),(0,p.jsx)("div",{className:"page-table-column page-table-label",children:"Roles"}),(0,p.jsx)("div",{className:"page-table-column page-table-label",children:"Frontend"}),(0,p.jsx)("div",{className:"page-table-column page-table-label",children:"Backend"})]}),Object.entries(g).map((function(e,a){var s=e[1],l=JSON.parse(s.users).find((function(e){return e.user_email===w.search}));return(0,p.jsx)("div",{className:"page-table-row-outter",children:(0,p.jsxs)("div",{className:"page-table-row-inner",children:[(0,p.jsx)("div",{className:"page-table-column page-table-label",children:(0,p.jsx)(t.rU,{to:"/site/".concat(s.id),children:s.label})}),(0,p.jsx)("div",{className:"page-table-column page-table-label",children:(0,p.jsx)(t.rU,{to:"/site/list/".concat(s.domain),children:s.domain_name})}),(0,p.jsx)("div",{className:"page-table-column",children:l.display_name}),(0,p.jsx)("div",{className:"page-table-column",children:l.user_login}),(0,p.jsx)("div",{className:"page-table-column",children:l.roles.join(", ")}),(0,p.jsx)("div",{className:"page-table-column",children:(0,p.jsx)("a",{href:w.url,target:"_blank",rel:"noreferrer",children:"Visit"})}),(0,p.jsx)("div",{className:"page-table-column",children:(0,p.jsx)("a",{href:w.adminurl,target:"_blank",rel:"noreferrer",children:"Visit"})})]})},a)}))]})]})}}}]);
//# sourceMappingURL=255.cbf8aab6.chunk.js.map