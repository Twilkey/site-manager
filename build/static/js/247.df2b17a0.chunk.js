"use strict";(self.webpackChunksite_manager=self.webpackChunksite_manager||[]).push([[247],{13582:function(e,a){a.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=["APAC","EMEA","North America"];return null===e?a:a[e]}},51599:function(e,a,l){l.r(a),l.d(a,{default:function(){return f}});var s=l(74165),n=l(15861),t=l(29439),i=l(57689),c=l(72791),r=l(643),d=l(57467),o=l(30337),u=l(68434),m=l(39716),h=l(13748),p=l(11087),b=l(80184),g=function(e){return(0,b.jsxs)("div",{className:"page-table",children:[(0,b.jsxs)("div",{className:"page-table-head",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Name"}),(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Username"}),(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Email"}),(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Roles"})]}),e.siteusers.map((function(e,a){return(0,b.jsx)("div",{className:"page-table-row-outter",children:(0,b.jsxs)("div",{className:"page-table-row-inner",children:[(0,b.jsx)("div",{className:"page-table-column",children:(0,b.jsx)(p.rU,{to:"/site/user/".concat(encodeURIComponent(e.user_email)),children:e.display_name})}),(0,b.jsx)("div",{className:"page-table-column",children:e.user_login}),(0,b.jsx)("div",{className:"page-table-column",children:e.user_email}),(0,b.jsx)("div",{className:"page-table-column",children:e.roles.join(", ")})]})},a)}))]})},x=function(e){var a=e.theme;return(0,b.jsxs)("div",{className:"page-table",children:[(0,b.jsxs)("div",{className:"page-table-head",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Theme Name"}),(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Description"}),(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Author"}),(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Version"}),(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Is Parent"})]}),(0,b.jsx)("div",{className:"page-table-row-outter",children:(0,b.jsxs)("div",{className:"page-table-row-inner",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label",children:(0,b.jsx)(p.rU,{to:"/site/theme/".concat(encodeURIComponent(a.name)),children:a.name})}),(0,b.jsx)("div",{className:"page-table-column",children:a.desc}),(0,b.jsx)("div",{className:"page-table-column",children:a.author}),(0,b.jsx)("div",{className:"page-table-column",children:a.version}),(0,b.jsx)("div",{className:"page-table-column",children:a.isparent})]})})]})},v=function(e){var a=e.plugins;return(0,b.jsxs)("div",{className:"page-table",children:[(0,b.jsxs)("div",{className:"page-table-head",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label page-table-name",children:"Plugin Name"}),(0,b.jsx)("div",{className:"page-table-column page-table-label page-table-author",children:"Author"}),(0,b.jsx)("div",{className:"page-table-column page-table-label page-table-status",children:"Status"}),(0,b.jsx)("div",{className:"page-table-column page-table-label page-table-version",children:"Version"}),(0,b.jsx)("div",{className:"page-table-column page-table-label page-table-update",children:"Update Available"}),(0,b.jsx)("div",{className:"page-table-column page-table-label page-table-new_version",children:"New Version"})]}),a.map((function(e,a){return(0,b.jsxs)("div",{className:"page-table-row-outter",children:[(0,b.jsxs)("div",{className:"page-table-row-inner",children:[(0,b.jsx)("div",{className:"page-table-column page-table-name",children:(0,b.jsx)(p.rU,{to:"/site/plugin/".concat(encodeURIComponent(e.name)),children:e.name})}),(0,b.jsx)("div",{className:"page-table-column page-table-author",children:e.author}),(0,b.jsx)("div",{className:"page-table-column page-table-status",children:e.status}),(0,b.jsx)("div",{className:"page-table-column page-table-version",children:e.version}),(0,b.jsx)("div",{className:"page-table-column page-table-update",children:e.update}),(0,b.jsx)("div",{className:"page-table-column page-table-new_version",children:e.new_version})]}),(0,b.jsx)("div",{className:"page-table-row-inner",children:(0,b.jsx)("div",{className:"page-table-column page-table-desc",children:e.desc.replace(/(<([^>]+)>)/gi,"")})})]},a)}))]})},j=function(e){var a=e.notes;return(0,b.jsx)("div",{className:"page-table",children:(0,b.jsx)("div",{className:"page-table-row-outter",children:(0,b.jsx)("div",{className:"page-table-row-inner",children:(0,b.jsx)("div",{className:"page-table-row-inner-padding",children:a})})})})},N=l(13582),f=function(e){var a=(0,i.UO)(),l=(0,i.s0)(),p=(0,c.useState)(null),f=(0,t.Z)(p,2),w=f[0],U=f[1],Z=(0,c.useState)(!1),k=(0,t.Z)(Z,2),_=k[0],C=k[1],R=(0,c.useRef)(!1);(0,c.useEffect)((function(){if(!1===R.current){var e=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(){var l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={enviornment:window.location.hostname,action:"get_custom",fetchtype:"single",fields:"sites.*, domains.domain AS domain_name",table:"sites LEFT JOIN domains on sites.domain = domains.id",where:"sites.id=:id",params:"id:".concat(a.id)},e.next=3,fetch("".concat("http://devops-backend.wwtd.tech","?")+new URLSearchParams(l)).then((function(e){return e.json()})).then((function(e){U(e)}),(function(e){console.log(e),m.Z.push((0,b.jsx)(h.Z,{showIcon:!0,type:"error",children:e.message}),{duration:3e3})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),R.current=!0}}));var y=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(l){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,fetch("".concat("http://devops-backend.wwtd.tech","?")+new URLSearchParams({enviornment:window.location.hostname,action:"update_".concat(l),id:a.id})).then((function(e){return e.json()})).then((function(e){return C(!1),m.Z.push((0,b.jsxs)(h.Z,{showIcon:!0,type:"success",children:[w.label," ",l," data was successfully updated"]}),{duration:3e3}),null}),(function(e){console.log(e),m.Z.push((0,b.jsx)(h.Z,{showIcon:!0,type:"error",children:e.message}),{duration:3e3})}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://devops-backend.wwtd.tech","?")+new URLSearchParams({enviornment:window.location.hostname,action:"delete_site",id:a}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),m.Z.push((0,b.jsx)(h.Z,{showIcon:!0,type:"error",children:e.t0.message}),{duration:3e3});case 9:return e.prev=9,l("/site/list"),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,5,9,12]])})));return function(a){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:w&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"page-title site-page-title",children:[(0,b.jsxs)("div",{className:"site-page-title-left",children:[(0,b.jsx)("h1",{children:w.label}),w.vertical&&(0,b.jsxs)("div",{className:"site-page-meta",children:["Vertical: ",(0,N.Z)(w.vertical)]})]}),(0,b.jsx)(d.Z,{trigger:(0,b.jsx)("button",{className:"button",children:"Force Updates"}),modal:!0,children:function(e){return(0,b.jsx)("div",{className:"site-force-update",children:(0,b.jsxs)("div",{className:"modal",children:[(0,b.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),(0,b.jsx)("div",{className:"header",children:"Force Updates"}),(0,b.jsx)("div",{className:"content",children:_&&(0,b.jsx)(r.CJ,{height:"100",width:"100",color:"#4caf50",ariaLabel:"triangle-loading",visible:!0})}),(0,b.jsxs)("div",{className:"actions",children:[(0,b.jsx)("button",{className:"button",onClick:function(e){return y("theme",a.id)},children:"Update Theme"}),(0,b.jsx)("button",{className:"button",onClick:function(e){return y("plugins",a.id)},children:"Update Plugins"}),(0,b.jsx)("button",{className:"button",onClick:function(e){return y("users",a.id)},children:"Update Users"})]})]})})}}),(0,b.jsxs)("div",{className:"flex-columns",children:[(0,b.jsx)("div",{className:"green-button",onClick:function(e){return l("/site/edit/".concat(w.id))},children:"Edit"}),(0,b.jsx)("div",{className:"red-button",onClick:function(e){return a=w.id,void(0,o._1)({title:"Confirm to delete",message:"Are you sure to delete this.",buttons:[{label:"Yes",onClick:function(){return S(a)}},{label:"No"}]});var a},children:"Delete"})]})]}),(0,b.jsxs)("div",{className:"page-table page-table-siteurls",children:[(0,b.jsx)("div",{className:"page-table-head",children:(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Site URLs"})}),w.domain_name&&(0,b.jsx)("div",{className:"page-table-row-outter",children:(0,b.jsxs)("div",{className:"page-table-row-inner",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Domain"}),(0,b.jsx)("div",{className:"page-table-column",children:w.domain_name})]})}),w.url&&(0,b.jsx)("div",{className:"page-table-row-outter",children:(0,b.jsxs)("div",{className:"page-table-row-inner",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Frontend URL"}),(0,b.jsx)("div",{className:"page-table-column",children:(0,b.jsx)("a",{href:w.url,target:"_blank",rel:"noreferrer",children:w.url})})]})}),w.adminurl&&(0,b.jsx)("div",{className:"page-table-row-outter",children:(0,b.jsxs)("div",{className:"page-table-row-inner",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Admin URL"}),(0,b.jsx)("div",{className:"page-table-column",children:(0,b.jsx)("a",{href:w.adminurl,target:"_blank",rel:"noreferrer",children:w.adminurl})})]})}),w.githubowner&&w.githubrepo&&(0,b.jsx)("div",{className:"page-table-row-outter",children:(0,b.jsxs)("div",{className:"page-table-row-inner",children:[(0,b.jsx)("div",{className:"page-table-column page-table-label",children:"Github URL"}),(0,b.jsx)("div",{className:"page-table-column",children:(0,b.jsxs)("a",{href:"https://github.com/".concat(w.githubowner,"/").concat(w.githubrepo),target:"_blank",rel:"noreferrer",children:["https://github.com/",w.githubowner,"/",w.githubrepo]})})]})})]}),(0,b.jsxs)(u.mQ,{children:[(0,b.jsxs)(u.td,{children:[null!==w.users&&(0,b.jsx)(u.OK,{children:"Users"}),null!==w.theme&&(0,b.jsx)(u.OK,{children:"Theme"}),null!==w.plugins&&(0,b.jsx)(u.OK,{children:"Plugins"}),w.notes&&(0,b.jsx)(u.OK,{children:"Notes"})]}),null!==w.users&&(0,b.jsx)(u.x4,{children:(0,b.jsx)(g,{siteusers:JSON.parse(w.users)})}),null!==w.theme&&(0,b.jsx)(u.x4,{children:(0,b.jsx)(x,{theme:JSON.parse(w.theme)})}),null!==w.plugins&&(0,b.jsx)(u.x4,{children:(0,b.jsx)(v,{plugins:JSON.parse(w.plugins)})}),w.notes&&(0,b.jsx)(u.x4,{children:(0,b.jsx)(j,{notes:w.notes})})]})]})})}}}]);
//# sourceMappingURL=247.df2b17a0.chunk.js.map