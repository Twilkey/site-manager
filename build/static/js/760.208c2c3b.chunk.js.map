{"version":3,"file":"static/js/760.208c2c3b.chunk.js","mappings":"oNAyEA,UArEkB,SAACA,GACf,OAAwBC,EAAAA,EAAAA,UAAS,IAAG,eAA7BC,EAAI,KAAEC,EAAO,KACdC,GAAmBC,EAAAA,EAAAA,SAAO,GA0ChC,OAxCAC,EAAAA,EAAAA,YAAU,WACN,IAAgC,IAA7BF,EAAiBG,QAAkB,CAClC,IAAMC,EAAO,yCAAG,2FAEM,OADdC,EAAW,GACXC,EAAY,GAAG,EAAD,OAEZC,MAAM,UAAGC,kCAAiC,KAAM,IAAIC,gBAAgB,CACtEC,YAAaC,OAAOC,SAASC,SAC7BC,OAAQ,YACRC,QAAS,SACTC,aAAc,SAEjBC,MAAK,SAACC,GACH,OAAOA,EAASC,MACpB,IACCF,MAAK,SAACG,GACHA,EAAOC,SAAQ,SAAAC,GACX,GAAGA,EAAMC,MAAM,CACX,IAAIC,EAAgBC,KAAKC,MAAMJ,EAAMC,OAClClB,EAASsB,eAAeH,EAAcI,MACrCvB,EAASmB,EAAcI,MAAM,KAE7BvB,EAASmB,EAAcI,MAAQ,CAACJ,EAAcI,KAAM,EAE5D,CACJ,IACAtB,EAAkB,OAAID,EACtBN,EAAQO,EACZ,IACA,SAACuB,GACGC,QAAQC,IAAIF,GACZG,EAAAA,EAAAA,MAAa,SAAC,IAAO,CAACC,UAAQ,EAACC,KAAK,QAAO,SAAEL,EAAMM,UAAoB,CAAEC,SAAU,KACvF,IAAG,KAAD,sCACL,kBA/BY,mCAiCbhC,IACAJ,EAAiBG,SAAU,CAC/B,CACJ,KAGI,iCACI,gBAAKkC,UAAU,aAAY,UACvB,wBAAI,iBAEPvC,GAAQA,EAAKwC,SACV,iBAAKD,UAAU,aAAY,WACvB,iBAAKA,UAAU,kBAAiB,WAC5B,gBAAKA,UAAU,qCAAoC,SAAC,gBACpD,gBAAKA,UAAU,qCAAoC,SAAC,aAEvDE,OAAOC,QAAQ1C,EAAKwC,QAAQG,KAAI,SAACC,EAAMC,GAAK,OACzC,gBAAKN,UAAU,wBAAuB,UAClC,iBAAKA,UAAU,uBAAsB,WACjC,gBAAKA,UAAU,qCAAoC,UAAC,SAAC,KAAI,CAACO,GAAE,sBAAiBC,mBAAmBH,EAAK,GAAG,KAAM,SAAEA,EAAK,GAAG,QACxH,gBAAKL,UAAU,oBAAmB,SAAEK,EAAK,GAAG,SAHRC,EAKtC,SAM9B,C","sources":["pages/ThemeList.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Message, toaster } from 'rsuite';\r\n\r\nconst ThemeList = (props) => {\r\n    const [data, setData] = useState([]);\r\n    const fetchingComplete = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if(fetchingComplete.current === false){\r\n            const getData = async () => {\r\n                let themeArr = [];\r\n                let mergedArr = [];\r\n        \r\n                await fetch(`${process.env.REACT_APP_BACKEND_URL}?` + new URLSearchParams({\r\n                    enviornment: window.location.hostname,\r\n                    action: 'get_sites',\r\n                    orderby: 'domain',\r\n                    orderbydirec: 'ASC'\r\n                }))\r\n                .then((response) => {\r\n                    return response.json();\r\n                })\r\n                .then((result) => {\r\n                    result.forEach(sites => {\r\n                        if(sites.theme){\r\n                            let thisSiteTheme = JSON.parse(sites.theme);\r\n                            if(themeArr.hasOwnProperty(thisSiteTheme.name)){\r\n                                themeArr[thisSiteTheme.name][1]++;\r\n                            } else {\r\n                                themeArr[thisSiteTheme.name] = [thisSiteTheme.name, 1];\r\n                            }\r\n                        }\r\n                    });\r\n                    mergedArr['themes'] = themeArr;\r\n                    setData(mergedArr);\r\n                },\r\n                (error) => {\r\n                    console.log(error)\r\n                    toaster.push(<Message showIcon type=\"error\">{error.message}</Message>, { duration: 3000 });\r\n                });\r\n            }\r\n\r\n            getData();\r\n            fetchingComplete.current = true;\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <div className='page-title'>\r\n                <h1>Theme List</h1>\r\n            </div>\r\n            {data && data.themes && \r\n                <div className='page-table'>\r\n                    <div className='page-table-head'>\r\n                        <div className='page-table-column page-table-label'>Theme Name</div>\r\n                        <div className='page-table-column page-table-label'>Count</div>\r\n                    </div>\r\n                    {Object.entries(data.themes).map((item, index) => (\r\n                        <div className='page-table-row-outter' key={index}>\r\n                            <div className='page-table-row-inner'>\r\n                                <div className='page-table-column page-table-label'><Link to={`/site/theme/${encodeURIComponent(item[1][0])}`}>{item[1][0]}</Link></div>\r\n                                <div className='page-table-column'>{item[1][1]}</div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ThemeList;"],"names":["props","useState","data","setData","fetchingComplete","useRef","useEffect","current","getData","themeArr","mergedArr","fetch","process","URLSearchParams","enviornment","window","location","hostname","action","orderby","orderbydirec","then","response","json","result","forEach","sites","theme","thisSiteTheme","JSON","parse","hasOwnProperty","name","error","console","log","toaster","showIcon","type","message","duration","className","themes","Object","entries","map","item","index","to","encodeURIComponent"],"sourceRoot":""}