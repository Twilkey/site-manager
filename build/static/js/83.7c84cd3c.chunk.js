"use strict";(self.webpackChunksite_manager=self.webpackChunksite_manager||[]).push([[83],{64253:function(e,r,n){var t=n(1413),a=n(45987),s=n(72791),o=n(22178),i=n(80184),c=["name","message","label","accepter","error"],l=(0,s.forwardRef)((function(e,r){var n=e.name,s=e.message,l=e.label,u=e.accepter,p=e.error,d=(0,a.Z)(e,c);return(0,i.jsxs)(o.Z.Group,{controlId:"".concat(n),ref:r,className:p?"has-error":"",children:[(0,i.jsxs)(o.Z.ControlLabel,{children:[l," "]}),(0,i.jsx)(o.Z.Control,(0,t.Z)({name:n,accepter:u,errorMessage:p},d)),(0,i.jsx)(o.Z.HelpText,{children:s})]})}));r.Z=l},19096:function(e,r,n){var t=n(74165),a=n(15861),s=n(80184),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n,a,o,i){var c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("action",a),c.append("enviornment",window.location.hostname),null!==o&&c.append("table",o),c.append("params",JSON.stringify(i)),e.next=7,fetch("".concat("http://devops-backend.wwtd.tech"),{method:"POST",mode:"cors",body:c}).then((function(e){if(!e.ok)throw r.push((0,s.jsx)(n,{showIcon:!0,type:"error",children:"Network response was not OK"}),{duration:3e3}),new Error("Network response was not OK");return e.json()})).then((function(e){return e})).catch((function(e){r.push((0,s.jsxs)(n,{showIcon:!0,type:"error",children:["There has been a problem with your fetch operation: ",e]}),{duration:3e3})}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(r,n,t,a,s){return e.apply(this,arguments)}}();r.Z=o},35069:function(e,r,n){var t=n(74165),a=n(15861),s=n(80184),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n,a,o,i,c,l){var u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(u=new FormData).append("action",a),u.append("enviornment",window.location.hostname),null!==o&&u.append("table",o),null!==c&&u.append("where",c),u.append("params",JSON.stringify(i)),e.next=8,fetch("".concat("http://devops-backend.wwtd.tech"),{method:"POST",mode:"cors",body:u}).then((function(e){if(!e.ok)throw r.push((0,s.jsx)(n,{showIcon:!0,type:"error",children:"Network response was not OK"}),{duration:3e3}),new Error("Network response was not OK");return e.json()})).then((function(e){return r.push((0,s.jsxs)(n,{showIcon:!0,type:"success",children:[l," was successfully updated"]}),{duration:3e3}),e})).catch((function(e){r.push((0,s.jsxs)(n,{showIcon:!0,type:"error",children:["There has been a problem with your fetch operation: ",e]}),{duration:3e3}),console.error("There has been a problem with your fetch operation:",e)}));case 8:case"end":return e.stop()}}),e)})));return function(r,n,t,a,s,o,i){return e.apply(this,arguments)}}();r.Z=o},90083:function(e,r,n){n.r(r);var t=n(74165),a=n(15861),s=n(29439),o=n(72791),i=n(46820),c=n(39716),l=n(13748),u=n(22178),p=n(26032),d=n(4265),h=n(67045),m=n(57689),f=n(19096),x=n(35069),w=n(64253),Z=n(80184),b=i.Z.Types,v=b.StringType,j=b.ArrayType,g=i.Z.Model({firstname:v().isRequired("This field is required."),lastname:v().isRequired("This field is required."),email:v().isEmail("Please enter a valid email address.").isRequired("This field is required."),roles:j().minLength(1,"Please select at least 1 role.").isRequired("This field is required.")});r.default=function(e){var r=(0,m.UO)(),n=(0,o.useRef)(),i=(0,o.useRef)(!1),b=(0,o.useState)("Add User"),v=(0,s.Z)(b,2),j=v[0],y=v[1],k=(0,o.useState)({}),N=(0,s.Z)(k,2),O=N[0],S=N[1],T=(0,o.useState)({firstname:"",lastname:"",email:"",roles:[]}),I=(0,s.Z)(T,2),R=I[0],q=I[1],C=["Administrator","Engineer","Manager"].map((function(e){return{label:e,value:e}}));(0,o.useEffect)((function(){if(!1===i.current){if(0!==Object.keys(r).length&&r.constructor===Object){var e=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://devops-backend.wwtd.tech","?")+new URLSearchParams({enviornment:window.location.hostname,action:"get_custom",fetchtype:"single",table:"users",where:"id=:id",params:"id:".concat(r.id)})).then((function(e){return e.json()})).then((function(e){y("Editing "+e.firstname+" "+e.lastname),q({firstname:e.firstname,lastname:e.lastname,email:e.email,roles:Object.values(JSON.parse(e.roles))})}),(function(e){console.log(e),c.Z.push((0,Z.jsx)(l.Z,{showIcon:!0,type:"error",children:e.message}),{duration:3e3})}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),c.Z.push((0,Z.jsx)(l.Z,{showIcon:!0,type:"error",children:e.t0.message}),{duration:3e3});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();e()}i.current=!0}}),[r,R]);var E=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!n.current.check()){e.next=11;break}if(!r.id){e.next=7;break}return e.next=5,(0,x.Z)(c.Z,l.Z,"update_custom","users",{id:r.id,firstname:R.firstname,lastname:R.lastname,email:R.email,roles:JSON.stringify(R.roles.filter(Boolean))},"id=:id",j);case 5:e.next=9;break;case 7:return e.next=9,(0,f.Z)(c.Z,l.Z,"insert_custom","users",{firstname:R.firstname,lastname:R.lastname,email:R.email,roles:JSON.stringify(R.roles.filter(Boolean))},"/user/list");case 9:e.next=13;break;case 11:console.log(O),c.Z.push((0,Z.jsx)(l.Z,{showIcon:!0,type:"error",children:(0,Z.jsx)("pre",{children:JSON.stringify(O)})}),{duration:3e3});case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(u.Z,{ref:n,onChange:q,onCheck:S,formValue:R,model:g,fluid:!0,children:[(0,Z.jsx)("div",{className:"page-title",children:(0,Z.jsx)("h1",{children:j})}),(0,Z.jsxs)("div",{className:"page-box",children:[(0,Z.jsx)("div",{className:"page-box-form-input",children:(0,Z.jsxs)("div",{className:"page-box-flex",children:[(0,Z.jsx)("div",{className:"page-box-form-input page-box-flex-child",children:(0,Z.jsx)(w.Z,{name:"firstname",label:"First Name",accepter:p.Z,error:O.firstname})}),(0,Z.jsx)("div",{className:"page-box-form-input page-box-flex-child",children:(0,Z.jsx)(w.Z,{name:"lastname",label:"Last Name",accepter:p.Z,error:O.lastname})})]})}),(0,Z.jsx)("div",{className:"page-box-form-input",children:(0,Z.jsx)(w.Z,{name:"email",label:"Email",accepter:p.Z,error:O.email})}),(0,Z.jsx)("div",{className:"page-box-form-input",children:(0,Z.jsx)(w.Z,{name:"roles",label:"Roles",data:C,accepter:d.Z,error:O.roles,block:!0,sticky:!0})})]}),(0,Z.jsx)(u.Z.Group,{children:(0,Z.jsx)(h.Z,{appearance:"primary",onClick:E,children:"Submit"})})]})})}}}]);
//# sourceMappingURL=83.7c84cd3c.chunk.js.map