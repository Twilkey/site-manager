"use strict";(self.webpackChunksite_manager=self.webpackChunksite_manager||[]).push([[970],{8970:function(e,n,a){a.r(n);var t=a(74165),s=a(15861),r=a(29439),c=a(72791),i=a(11087),l=a(39716),o=a(13748),u=a(80184);n.default=function(e){var n=(0,c.useState)([]),a=(0,r.Z)(n,2),d=a[0],p=a[1],h=(0,c.useRef)(!1);return(0,c.useEffect)((function(){if(!1===h.current){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[],e.next=4,fetch("".concat("http://devops-backend.wwtd.tech","?")+new URLSearchParams({enviornment:window.location.hostname,action:"get_sites",orderby:"domain",orderbydirec:"ASC"})).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){null!==e.plugins&&JSON.parse(e.plugins).forEach((function(e){e.name&&(n.hasOwnProperty(e.name)?n[e.name][1]++:n[e.name]=[e.name,1])}))})),a.plugins=n,p(a)}),(function(e){console.log(e),l.Z.push((0,u.jsx)(o.Z,{showIcon:!0,type:"error",children:e.message}),{duration:3e3})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),h.current=!0}})),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"page-title",children:(0,u.jsx)("h1",{children:"Plugin List"})}),d&&d.plugins&&(0,u.jsxs)("div",{className:"page-table",children:[(0,u.jsxs)("div",{className:"page-table-head",children:[(0,u.jsx)("div",{className:"page-table-column page-table-label",children:"Plugin Name"}),(0,u.jsx)("div",{className:"page-table-column page-table-label",children:"Count"})]}),Object.entries(d.plugins).map((function(e,n){return(0,u.jsx)("div",{className:"page-table-row-outter",children:(0,u.jsxs)("div",{className:"page-table-row-inner",children:[(0,u.jsx)("div",{className:"page-table-column page-table-label",children:(0,u.jsx)(i.rU,{to:"/site/plugin/".concat(encodeURIComponent(e[1][0])),children:e[1][0]})}),(0,u.jsx)("div",{className:"page-table-column",children:e[1][1]})]})},n)}))]})]})}}}]);
//# sourceMappingURL=970.ace2339c.chunk.js.map